<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fluent UI + Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    body {
      background-color: #1b1b1b;
      color: #f0f0f0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .sidebar {
      background-color: #2b2b2b;
      border-right: 1px solid #3a3a3a;
    }
    .card {
      background-color: #252525;
      border-radius: 0.75rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.6);
      padding: 1rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      padding: 0.75rem;
      border-bottom: 1px solid #3a3a3a;
    }
    th {
      text-align: left;
      color: #bbbbbb;
    }
    tr:hover {
      background-color: #333333;
    }
  </style>
</head>
<body class="flex h-screen">
  <!-- Sidebar -->
  <div class="sidebar w-64 p-4 flex flex-col">
    <h1 class="text-xl font-bold mb-6">âš¡ Admin Panel</h1>
    <button id="usersBtn" class="flex items-center p-2 mb-2 rounded hover:bg-gray-700">
      <i data-feather="users" class="mr-2"></i> Users
    </button>
    <button id="messagesBtn" class="flex items-center p-2 rounded hover:bg-gray-700">
      <i data-feather="message-circle" class="mr-2"></i> Messages
    </button>
  </div>

  <!-- Main Content -->
  <div class="flex-1 p-6 overflow-y-auto">
    <div id="content" class="card">
      <h2 class="text-lg font-semibold mb-4">Welcome ðŸ‘‹</h2>
      <p>Select an option from the sidebar.</p>
    </div>
  </div>

  <script>
    feather.replace();

    async function loadData(type) {
      let url = type === 'users' ? '/api/users' : '/api/messages';
      const res = await fetch(url);
      const data = await res.json();

      let html = `<h2 class="text-lg font-semibold mb-4">${type.charAt(0).toUpperCase() + type.slice(1)}</h2>`;
      html += '<div class="overflow-x-auto"><table><thead><tr>';

      // Build table headers
      if (data.length > 0) {
        Object.keys(data[0]).forEach(key => {
          html += `<th>${key}</th>`;
        });
        html += '</tr></thead><tbody>';

        // Build table rows
        data.forEach(row => {
          html += '<tr>';
          Object.values(row).forEach(val => {
            html += `<td>${val}</td>`;
          });
          html += '</tr>';
        });
        html += '</tbody></table></div>';
      } else {
        html += '<p>No data found.</p>';
      }

      document.getElementById('content').innerHTML = html;
    }

    document.getElementById('usersBtn').addEventListener('click', () => loadData('users'));
    document.getElementById('messagesBtn').addEventListener('click', () => loadData('messages'));
  </script>
</body>
</html>
